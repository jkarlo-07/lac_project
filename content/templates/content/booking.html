{% extends "layout.html" %} 
{% load static %} 
{% load humanize %}

{% block title %} 
  Booking 
{%endblock%}

{% block extra_head %}
  <link rel="stylesheet" href="{% static 'css/booking.css' %}">
  <script src="{% static "js/level.js" %}"></script>
{% endblock %}

{% block content %}
<div class="booking-page-wrapper">
    <div class="booking_container_main">
        <div class="booking-step-wrapper clearfix">
            <div class="booking-step active">
              <a class="step-number">1</a>
              <a class="step-label">Rooms</a>
            </div>
            <div class="booking-step">
              <a class="step-number">2</a>
              <a class="step-label">Add-Ons</a>
            </div>
            <div class="booking-step">
              <a class="step-number">3</a>
              <a class="step-label">Payment</a>
            </div>
            <div class="booking-step">
              <a class="step-number">4</a>
              <a class="step-label">Complete</a>
            </div>
            <div class="booking-step-line">
              <div style="width: 25%;"></div> 
            </div>
        </div>
        <div class="booking-form-wrapper">
            <div class="booking-form">
                <img src="{% static 'images/icons/calendar-1.png' %}" alt="">
                <div>
                    <label>Check In</label>
                    <span class="checkin-display">01/01/2024</span>
                </div>  
            </div>
            <div class="booking-form">
                <img src="{% static 'images/icons/hourglass-1.png' %}" alt="">
                <div >
                    <label>Duration</label>
                    <select name="duration" id="book-duration">
                        <option value="12hrs">12hrs</option>
                        <option value="24hrs">24hrs</option>
                    </select>
                </div>
            </div>
            <div class="booking-form">
                <img src="{% static 'images/icons/back-in-time - 1.png' %}" alt="">
                <div>
                    <label>Check-In Time</label>
                    <select name="checkin_time" id="book-checkin-time">
                        <option value="8:00am">8:00 am</option>
                        <option value="8:00am">9:00 am</option>
                        <option value="9:00am">10:00 am</option>
                        <option value="10:00am">11:00 am</option>
                        <option value="11:00am">12:00 pm</option>
                        <option value="12:00am">1:00 pm</option>
                        <option value="1:00am">2:00 pm</option>
                        <option value="2:00am">3:00 pm</option>
                        <option value="3:00am">4:00 pm</option>
                        <option value="4:00am">5:00 pm</option>
                        <option value="5:00am">6:00 pm</option>
                        <option value="5:00am">7:00 pm</option>
                        <option value="5:00am">8:00 pm</option>
                        <option value="5:00am">9:00 pm</option>
                        <option value="5:00am">10:00 pm</option>
                    </select>
                </div>
            </div>
            <div class="booking-form">
                <img src="{% static 'images/icons/user-1.png' %}" alt="">
                <div>
                    <label>Capacity</label>
                    <input name="capacity" class="input-capacity" type="text">
                </div>
            </div>
            <div class="booking-form-button-wrapper">
                <img class = "img-search-btn"src="{% static 'images/icons/search-2.png' %}" alt="Search">
                <p>Search</p>
            </div>
        </div>
        {% for roomtype in roomtypes  %}
				<form action="{% url 'content:book_3' %}" method="GET">
					<div class="booking-room-container">
						<div class="room-image">
								<a href="#"><img src="{{ roomtype.picture.url }}" alt="Room Image"></a>
						</div>
						<div class="room-accomodation-wrapper">
								<div class="room-accomodation-info">
										<h3>{{roomtype.room_type}}</h3>
										<ul>
												<li><span>Capacity:</span> {{ roomtype.capacity }}pax</li>
												<li><span>Size:</span> 35sqm</li>
												<li><span>Price:</span> â‚± {{ roomtype.price|floatformat:2|intcomma }}</li>
												<li> <h>Description:</h4></li>
												<li><p> {{roomtype.description}} </p></li>
										</ul>
								</div>
								<div class="room-rate-section">
										<div class="room-rate-info">
												<div class="room-clearfix buttons">
														<input type="hidden" name="roomtype" value="{{ roomtype.id }}">
														<input type="hidden" name="check_in" value="">
														<input type="submit" value="Select Room" class="accomodation-select-room">
												</div>
										</div>
								</div>
							</form>
          </div>
        </div>
        {% endfor %}
        
    </div>
    <div class="booking-page-sidebar atWrapper">
        <div class="booking-stay-wrapper">
            <h3>Your Stay</h3>
            <hr class="bar-yellow">
            <ul>
                <li><span>Dates:</span> Aug 17, 2024 - Aug 18, 2024</li>
                <br>
                <li><span>Guests:</span> 2 Adults, 2 Children</li>
                <br>
            </ul>
            <hr class="divider">
            <div class="booking-total">
                <h4>Total</h4>
                <h4>$0</h4>
            </div>
        </div>
        <div class="booking-contact">
            <h3>Need Assistance?</h3>
            <hr class="bar-yellow">
            <p>Our dedicated reservations team is ready to help you around the clock.</p>
            <ul class="contact-info">
                <li class="contact-list"><img class="contact-icon-image" src="{% static 'images/icons/location-pin-1.png' %}" alt=""><a href="#">Guinyangan, Quezon</a></li>
                <li class="contact-list"><img class="contact-icon-image" src="{% static 'images/icons/phone-1.png' %}" alt=""><a href="#">1111-2222-3333</a></li>
                <li class="contact-list"><img class="contact-icon-image" src="{% static 'images/icons/email-1.png' %}" alt=""><a href="#">lacresort@gmail.com</a></li>
            </ul>
        </div>
    </div>
</div>
{% endblock %}

{% block add_script %}
	<script>
		const urlParams = new URLSearchParams(window.location.search);

		// Extract the check_in and check_out parameters
		const checkInDate = urlParams.get('check_in');

		const checkInDisplay = document.querySelector(".checkin-display");
		checkInDisplay.textContent =checkInDate;

		document.querySelectorAll(".accomodation-select-room").forEach(button => {
			button.addEventListener("click", function(event) {
				event.preventDefault();

				const form = this.closest("form");
	
				form.querySelector('input[name="check_in"]').value = checkInDate;
	

				form.submit();
			});
		});
	</script>
{% endblock  %}
