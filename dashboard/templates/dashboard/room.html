{% extends "admin_layout.html" %}

{% load static %}

{% block title %}
  Room
{% endblock %}

{% block extra_head %}
    <link rel="stylesheet" href="{% static "lib/datatables/dataTables.css" %}">

{% endblock %}

{% block content %}
	<form action="{% url 'dashboard:add_existing_room' %}" 
				method="post" 
				class="booking-forms-walkin addroom-form"
				style="{% if show_form %}display: none;{% else %}display: block;{% endif %};">
		{% csrf_token %}
		<h1>Add Room</h1>
		<div class="room-type-info">
				<div class="input-group">
						<label for="room-number">Room Number</label>
						<input type="text" name="room_number" id="room-number" required placeholder="Enter room number">
				</div>

				<div class="input-group">
						<label for="room-type-select">Room Type</label>
						<select name="room_type" id="room-type-select" required>
								<option value="">--------------</option>
								{% for roomtype in roomtypes %}
										<option value="{{ roomtype.id }}">{{ roomtype.room_type }}</option>
								{% endfor %}
						</select>
				</div>

				<button type="submit">Submit</button>
		</div>
	</form>


	<div class="option_room_form">
			<div class="option-header">
					<h1>Add Room</h1>
					<img src="{% static "images/icons/button-option.png" %}" alt="close icon" id="close-room-option">
			</div>
			<div class="option-container">
					<button type="button">New Room Type</button>
					<button type="button" class="add-existing-btn">Existing Room Type</button>
			</div>
	</div>
  <p class="dashboard-add-room">Add Room</p>
  <table id="myTable" class="display">
    <thead>
        <tr>
            <th>Room Number</th>
            <th>Room Type</th>
            <th>Description</th>
            <th>Price</th>
            <th>Capacity</th>
        </tr>
    </thead>
    <tbody>
        {% for room in rooms %}
        <tr>
            <td>{{room.room_number}}</td>
            <td>{{room.room_type.room_type}}</td>
            <td>Lorem ipsum dolor sit amet consectetur adipisicing elit. Enim veritatis molestiae officiis non. Amet adipisci dolorem, molestiae, quae aperiam optio vitae sequi natus nulla reiciendis at iusto, non tenetur minima!</td>
            <td>{{room.room_type.price}}</td>
            <td>{{room.room_type.capacity}}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>    
{% endblock %}
{% block extra_script  %}
    <script src="{% static "lib/jquery/jquery-3.7.1.js" %}"></script>

    <script src="{% static "lib/datatables/dataTables.js" %}"></script>

    <script>
        $(document).ready(function () {
            $('#myTable').DataTable();
        });

				const addRoomBtn = document.querySelector(".dashboard-add-room");
				const addExistingBtn = document.querySelector('.add-existing-btn')
				const options = document.querySelector('.option_room_form');
				const closeOption = document.getElementById('close-room-option');
				const addExistingForm = document.querySelector('.addroom-form');

				addRoomBtn.addEventListener("click", function() {
					options.style.display = 'block';
				});

				closeOption.addEventListener("click", function() {
					options.style.display = 'none';
				})

				addExistingBtn.addEventListener("click", function() {
					addExistingForm.style.display = 'block';
				})
    </script>

{% endblock  %}